# -*- coding: utf-8 -*-
"""
Spyder Editor

This is a temporary script file.
"""

""" data """
stopsByRoute = []
stopsByRoute.append([{"id":"1","name":"SAC","lat":"40.91417000000000","lon":"-73.12472000000000","issuffolk":"1","last_arrived_time":"2018-09-07 20:02:34","last_arrived_passenger_count":"0","is_delayed":"1","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"1","isSB":"1"},{"id":"2","name":"CEWIT","lat":"40.90197000000000","lon":"-73.13366400000000","issuffolk":"0","last_arrived_time":"2018-09-07 20:02:45","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"3","name":"AERTC","lat":"40.90369900000000","lon":"-73.13488600000000","issuffolk":"0","last_arrived_time":"2018-09-07 20:02:44","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"4","name":"RSS","lat":"40.89493900000000","lon":"-73.14319000000000","issuffolk":"0","last_arrived_time":"2018-09-07 20:02:47","last_arrived_passenger_count":"0","is_delayed":"1","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"}])
stopsByRoute.append([{"id":"1","name":"SAC","lat":"40.91417000000000","lon":"-73.12472000000000","issuffolk":"1","last_arrived_time":"2018-09-07 20:02:34","last_arrived_passenger_count":"0","is_delayed":"1","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"1","isSB":"1"},{"id":"36","name":"Roosevelt West","lat":"40.91198400000000","lon":"-73.12805200000000","issuffolk":"1","last_arrived_time":"0000-00-00 00:00:00","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"39","name":"Tabler Steps West","lat":"40.91103900000000","lon":"-73.12646700000000","issuffolk":"1","last_arrived_time":"0000-00-00 00:00:00","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"37","name":"Roth\/Tabler West","lat":"40.91038700000000","lon":"-73.12458200000000","issuffolk":"1","last_arrived_time":"0000-00-00 00:00:00","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"38","name":"South Campus West","lat":"40.90477100000000","lon":"-73.12177100000000","issuffolk":"1","last_arrived_time":"0000-00-00 00:00:00","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"6","name":"Child Care","lat":"40.89811600000000","lon":"-73.12805100000000","issuffolk":"1","last_arrived_time":"2018-09-07 19:59:23","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"5","name":"South P Lot","lat":"40.89678200000000","lon":"-73.12664200000000","issuffolk":"0","last_arrived_time":"2018-09-07 20:02:38","last_arrived_passenger_count":"0","is_delayed":"1","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"7","name":"Dental School","lat":"40.90191800000000","lon":"-73.12061200000000","issuffolk":"0","last_arrived_time":"2018-09-07 20:00:38","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"8","name":"Chapin","lat":"40.90842900000000","lon":"-73.11165200000000","issuffolk":"1","last_arrived_time":"2018-09-07 20:00:01","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"9","name":"Point of Woods","lat":"40.91387100000000","lon":"-73.11453000000000","issuffolk":"1","last_arrived_time":"2018-09-07 20:01:28","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"10","name":"Administration","lat":"40.91419600000000","lon":"-73.11920900000000","issuffolk":"1","last_arrived_time":"2018-09-07 20:02:28","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"11","name":"Life Sciences","lat":"40.91097000000000","lon":"-73.11913400000000","issuffolk":"1","last_arrived_time":"2018-09-07 20:02:36","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"24","name":"Roth\/Tabler East","lat":"40.91033400000000","lon":"-73.12413800000000","issuffolk":"1","last_arrived_time":"2018-08-19 17:29:28","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"25","name":"Tabler Steps East","lat":"40.91102080000000","lon":"-73.12602100000000","issuffolk":"1","last_arrived_time":"2018-08-19 17:29:46","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"30","name":"Roosevelt East","lat":"40.91190700000000","lon":"-73.12765400000000","issuffolk":"1","last_arrived_time":"2018-08-19 17:34:56","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"27","name":"Circle Road","lat":"40.91302500000000","lon":"-73.12913900000000","issuffolk":"0","last_arrived_time":"2018-08-19 17:31:40","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"}])
stopsByRoute.append([{"id":"1","name":"SAC","lat":"40.91417000000000","lon":"-73.12472000000000","issuffolk":"1","last_arrived_time":"2018-09-07 20:02:34","last_arrived_passenger_count":"0","is_delayed":"1","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"1","isSB":"1"},{"id":"28","name":"Kelly","lat":"40.91338800000000","lon":"-73.12913900000000","issuffolk":"1","last_arrived_time":"2018-08-19 17:32:42","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"18","name":"Gym Road East","lat":"40.91801200000000","lon":"-73.12938700000000","issuffolk":"0","last_arrived_time":"2018-08-19 17:11:15","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"20","name":"North P Lot","lat":"40.92280500000000","lon":"-73.12588400000000","issuffolk":"1","last_arrived_time":"2018-08-19 17:19:29","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"19","name":"LIRR","lat":"40.92139400000000","lon":"-73.12742200000000","issuffolk":"1","last_arrived_time":"2018-08-19 17:18:51","last_arrived_passenger_count":"0","is_delayed":"1","external":"1","isLIRR":"1","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"31","name":"Benedict","lat":"40.92051500000000","lon":"-73.11849400000000","issuffolk":"1","last_arrived_time":"2018-08-19 16:43:12","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"21","name":"H Quad","lat":"40.91918000000000","lon":"-73.12120000000000","issuffolk":"1","last_arrived_time":"2018-08-19 17:24:05","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"1","isBNL":"0","isSB":"1"},{"id":"10","name":"Administration","lat":"40.91419600000000","lon":"-73.11920900000000","issuffolk":"1","last_arrived_time":"2018-09-07 20:02:28","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"11","name":"Life Sciences","lat":"40.91097000000000","lon":"-73.11913400000000","issuffolk":"1","last_arrived_time":"2018-09-07 20:02:36","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"24","name":"Roth\/Tabler East","lat":"40.91033400000000","lon":"-73.12413800000000","issuffolk":"1","last_arrived_time":"2018-08-19 17:29:28","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"25","name":"Tabler Steps East","lat":"40.91102080000000","lon":"-73.12602100000000","issuffolk":"1","last_arrived_time":"2018-08-19 17:29:46","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"30","name":"Roosevelt East","lat":"40.91190700000000","lon":"-73.12765400000000","issuffolk":"1","last_arrived_time":"2018-08-19 17:34:56","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"12","name":"Greeley","lat":"40.91103600000000","lon":"-73.13129800000000","issuffolk":"0","last_arrived_time":"2018-09-07 20:02:48","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"13","name":"West E","lat":"40.91176700000000","lon":"-73.13445400000000","issuffolk":"0","last_arrived_time":"2018-09-07 19:50:46","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"14","name":"West G","lat":"40.91295900000000","lon":"-73.13605900000000","issuffolk":"0","last_arrived_time":"2018-09-07 20:01:28","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"15","name":"West C","lat":"40.91251300000000","lon":"-73.13338700000000","issuffolk":"0","last_arrived_time":"2018-09-07 20:01:14","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"16","name":"Nobel","lat":"40.91294600000000","lon":"-73.12950200000000","issuffolk":"0","last_arrived_time":"2018-09-07 19:55:26","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"}])
stopsByRoute.append([{"id":"1","name":"SAC","lat":"40.91417000000000","lon":"-73.12472000000000","issuffolk":"1","last_arrived_time":"2018-09-07 20:02:34","last_arrived_passenger_count":"0","is_delayed":"1","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"1","isSB":"1"},{"id":"17","name":"H Lot","lat":"40.91362600000000","lon":"-73.12851600000000","issuffolk":"0","last_arrived_time":"2018-08-26 22:19:33","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"36","name":"Roosevelt West","lat":"40.91198400000000","lon":"-73.12805200000000","issuffolk":"1","last_arrived_time":"0000-00-00 00:00:00","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"12","name":"Greeley","lat":"40.91103600000000","lon":"-73.13129800000000","issuffolk":"0","last_arrived_time":"2018-09-07 20:02:48","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"13","name":"West E","lat":"40.91176700000000","lon":"-73.13445400000000","issuffolk":"0","last_arrived_time":"2018-09-07 19:50:46","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"14","name":"West G","lat":"40.91295900000000","lon":"-73.13605900000000","issuffolk":"0","last_arrived_time":"2018-09-07 20:01:28","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"15","name":"West C","lat":"40.91251300000000","lon":"-73.13338700000000","issuffolk":"0","last_arrived_time":"2018-09-07 20:01:14","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"16","name":"Nobel","lat":"40.91294600000000","lon":"-73.12950200000000","issuffolk":"0","last_arrived_time":"2018-09-07 19:55:26","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"}])
stopsByRoute.append([{"id":"19","name":"LIRR","lat":"40.92139400000000","lon":"-73.12742200000000","issuffolk":"1","last_arrived_time":"2018-08-19 17:18:51","last_arrived_passenger_count":"0","is_delayed":"1","external":"1","isLIRR":"1","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"40","name":"Gym Road West","lat":"40.91848200000000","lon":"-73.12933200000000","issuffolk":"0","last_arrived_time":"0000-00-00 00:00:00","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"29","name":"Hamilton","lat":"40.91380300000000","lon":"-73.12998300000000","issuffolk":"1","last_arrived_time":"2018-08-19 17:34:23","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"1","name":"SAC","lat":"40.91417000000000","lon":"-73.12472000000000","issuffolk":"1","last_arrived_time":"2018-09-07 20:02:34","last_arrived_passenger_count":"0","is_delayed":"1","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"1","isSB":"1"},{"id":"28","name":"Kelly","lat":"40.91338800000000","lon":"-73.12913900000000","issuffolk":"1","last_arrived_time":"2018-08-19 17:32:42","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"18","name":"Gym Road East","lat":"40.91801200000000","lon":"-73.12938700000000","issuffolk":"0","last_arrived_time":"2018-08-19 17:11:15","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"20","name":"North P Lot","lat":"40.92280500000000","lon":"-73.12588400000000","issuffolk":"1","last_arrived_time":"2018-08-19 17:19:29","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"}])
stopsByRoute.append([{"id":"5","name":"South P Lot","lat":"40.89678200000000","lon":"-73.12664200000000","issuffolk":"0","last_arrived_time":"2018-09-07 20:02:38","last_arrived_passenger_count":"0","is_delayed":"1","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"23","name":"South Campus East","lat":"40.90441000000000","lon":"-73.12157900000000","issuffolk":"1","last_arrived_time":"2018-08-19 17:29:06","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"26","name":"Engineering Dr","lat":"40.91348000000000","lon":"-73.12416200000000","issuffolk":"0","last_arrived_time":"2018-08-19 17:30:51","last_arrived_passenger_count":"0","is_delayed":"1","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"38","name":"South Campus West","lat":"40.90477100000000","lon":"-73.12177100000000","issuffolk":"1","last_arrived_time":"0000-00-00 00:00:00","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"6","name":"Child Care","lat":"40.89811600000000","lon":"-73.12805100000000","issuffolk":"1","last_arrived_time":"2018-09-07 19:59:23","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"}])
stopsByRoute.append([{"id":"1","name":"SAC","lat":"40.91417000000000","lon":"-73.12472000000000","issuffolk":"1","last_arrived_time":"2018-09-07 20:02:34","last_arrived_passenger_count":"0","is_delayed":"1","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"1","isSB":"1"},{"id":"28","name":"Kelly","lat":"40.91338800000000","lon":"-73.12913900000000","issuffolk":"1","last_arrived_time":"2018-08-19 17:32:42","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"18","name":"Gym Road East","lat":"40.91801200000000","lon":"-73.12938700000000","issuffolk":"0","last_arrived_time":"2018-08-19 17:11:15","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"20","name":"North P Lot","lat":"40.92280500000000","lon":"-73.12588400000000","issuffolk":"1","last_arrived_time":"2018-08-19 17:19:29","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"19","name":"LIRR","lat":"40.92139400000000","lon":"-73.12742200000000","issuffolk":"1","last_arrived_time":"2018-08-19 17:18:51","last_arrived_passenger_count":"0","is_delayed":"1","external":"1","isLIRR":"1","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"31","name":"Benedict","lat":"40.92051500000000","lon":"-73.11849400000000","issuffolk":"1","last_arrived_time":"2018-08-19 16:43:12","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"21","name":"H Quad","lat":"40.91918000000000","lon":"-73.12120000000000","issuffolk":"1","last_arrived_time":"2018-08-19 17:24:05","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"1","isBNL":"0","isSB":"1"},{"id":"48","name":"Modified Union","lat":"40.91651700000000","lon":"-73.12159700000000","issuffolk":"0","last_arrived_time":"0000-00-00 00:00:00","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"0"},{"id":"10","name":"Administration","lat":"40.91419600000000","lon":"-73.11920900000000","issuffolk":"1","last_arrived_time":"2018-09-07 20:02:28","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"11","name":"Life Sciences","lat":"40.91097000000000","lon":"-73.11913400000000","issuffolk":"1","last_arrived_time":"2018-09-07 20:02:36","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"24","name":"Roth\/Tabler East","lat":"40.91033400000000","lon":"-73.12413800000000","issuffolk":"1","last_arrived_time":"2018-08-19 17:29:28","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"25","name":"Tabler Steps East","lat":"40.91102080000000","lon":"-73.12602100000000","issuffolk":"1","last_arrived_time":"2018-08-19 17:29:46","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"30","name":"Roosevelt East","lat":"40.91190700000000","lon":"-73.12765400000000","issuffolk":"1","last_arrived_time":"2018-08-19 17:34:56","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"12","name":"Greeley","lat":"40.91103600000000","lon":"-73.13129800000000","issuffolk":"0","last_arrived_time":"2018-09-07 20:02:48","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"13","name":"West E","lat":"40.91176700000000","lon":"-73.13445400000000","issuffolk":"0","last_arrived_time":"2018-09-07 19:50:46","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"14","name":"West G","lat":"40.91295900000000","lon":"-73.13605900000000","issuffolk":"0","last_arrived_time":"2018-09-07 20:01:28","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"15","name":"West C","lat":"40.91251300000000","lon":"-73.13338700000000","issuffolk":"0","last_arrived_time":"2018-09-07 20:01:14","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"},{"id":"16","name":"Nobel","lat":"40.91294600000000","lon":"-73.12950200000000","issuffolk":"0","last_arrived_time":"2018-09-07 19:55:26","last_arrived_passenger_count":"0","is_delayed":"0","external":"1","isLIRR":"0","is7Bus":"0","isBRV":"0","isBNL":"0","isSB":"1"}])

''' end data '''

from bs4 import BeautifulSoup
import requests
import json
import smtplib
from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText
import time

startTime = time.time()
while True:
    activeBus_url = "http://smarttransit.cewit.stonybrook.edu/user_call/getAllActiveBuses.php"
    pg_response = requests.get(activeBus_url, timeout=5)
    """to get bus number data. Input = route_id from user"""
    activeBusData_json = str(BeautifulSoup(pg_response.content, 'html.parser'))
    activeBusData = json.loads(activeBusData_json)
    route_no = 3
    activeBusOnRoute = []
    
    
    for i in range(len(activeBusData)):
        if str(activeBusData[i]['routeID'])!= "None":
            if int(activeBusData[i]['routeID'])==(route_no):
                activeBusOnRoute.append(activeBusData[i]['busNum'])
    
    ''' get user_stop = Chapin from user'''
    user_stop = "Chapin"
    timeToStop = []
    for i in range(len(activeBusOnRoute)):
        pg_response = requests.get("http://smarttransit.cewit.stonybrook.edu/user_call/getNextStops.php?busNum="+activeBusOnRoute[i]+"&limit=30", timeout = 5)
        nextStopData = json.loads(str(BeautifulSoup(pg_response.content, 'html.parser')))
        for i in range(len(nextStopData)):
            if (nextStopData[i]["name"] == user_stop) :
                timeToStop.append(nextStopData[i]["min"])
                break;
    
    print(timeToStop)
    '''user specified alarmTime '''
    alarmTime = 2
    for i in range(len(timeToStop)):
        if int(timeToStop[i]) == alarmTime:
            msg = MIMEMultipart()
            msg['From'] = '<insert sending email here>'
            msg['To'] = '<insert receiving email here>'
            msg['Subject'] = 'BUS ALERT!'
            msg.attach(MIMEText("Bus is arriving in " + str(alarmTime) + " minutes", 'plain'))
            server = smtplib.SMTP('smtp.gmail.com', 587)    
            '''587 for TLS, 465 for SSL'''
            server.starttls()
            server.login('<insert sending email here>', '********')
            '''REMEMBER TO CHANGE PASSWORD'''
            server.sendmail('<insert sending email here>', '<insert receiving email here>', msg.as_string() )
            server.quit()
            break
        
    time.sleep(60.0 - ((time.time() - startTime) % 60.0))

    
    
'''
Switch in Twilio API:
account_sid = '****'
auth_token = '****'
client = Client(account_sid, auth_token)

message = client.messages \
    .create(
         body="Bus is arriving in " + str(alarmTime) +  " minutes",
         from_='+1****',
         to='+1*****'
     )
'''